# PostgreSQL ??
spring.datasource.url=jdbc:postgresql://localhost:5432/instagramdb
spring.datasource.username=postgres
spring.datasource.password=thee1234
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA ??
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true

#-- 1. ??? ???
#CREATE TABLE users (
#user_id SERIAL PRIMARY KEY,
#user_name VARCHAR(50) UNIQUE NOT NULL,
#user_email VARCHAR(100) UNIQUE NOT NULL,
#user_password VARCHAR(255) NOT NULL,
#user_fullname VARCHAR(100),
#user_avatar VARCHAR(500),
#created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
#updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
#);
#
#-- 2. ??? ???
#CREATE TABLE posts (
#post_id SERIAL PRIMARY KEY,
#user_id INTEGER NOT NULL REFERENCES users(user_id) ON DELETE CASCADE,
#post_image VARCHAR(500) NOT NULL,
#post_caption TEXT,
#post_location VARCHAR(200),
#created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
#updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
#);
#
#-- 3. ??? ???
#CREATE TABLE likes (
#like_id SERIAL PRIMARY KEY,
#post_id INTEGER NOT NULL REFERENCES posts(post_id) ON DELETE CASCADE,
#user_id INTEGER NOT NULL REFERENCES users(user_id) ON DELETE CASCADE,
#created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
#UNIQUE(post_id, user_id)
#);
#
#-- 4. ?? ???
#CREATE TABLE comments (
#comment_id SERIAL PRIMARY KEY,
#post_id INTEGER NOT NULL REFERENCES posts(post_id) ON DELETE CASCADE,
#user_id INTEGER NOT NULL REFERENCES users(user_id) ON DELETE CASCADE,
#comment_content TEXT NOT NULL,
#created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
#updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
#);
#
#-- 5. ??? ???
#CREATE TABLE stories (
#story_id SERIAL PRIMARY KEY,
#user_id INTEGER NOT NULL REFERENCES users(user_id) ON DELETE CASCADE,
#story_image VARCHAR(500) NOT NULL,
#created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
#expires_at TIMESTAMP DEFAULT (CURRENT_TIMESTAMP + INTERVAL '24 hours')
#);
#
#-- 6. ??? ???
#CREATE TABLE follows (
#follow_id SERIAL PRIMARY KEY,
#follower_id INTEGER NOT NULL REFERENCES users(user_id) ON DELETE CASCADE,
#following_id INTEGER NOT NULL REFERENCES users(user_id) ON DELETE CASCADE,
#created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
#UNIQUE(follower_id, following_id),
#CHECK (follower_id != following_id)
#);
#
#-- ??? ?? (?? ??)
#CREATE INDEX idx_posts_user_id ON posts(user_id);
#CREATE INDEX idx_posts_created_at ON posts(created_at DESC);
#CREATE INDEX idx_likes_post_id ON likes(post_id);
#CREATE INDEX idx_likes_user_id ON likes(user_id);
#CREATE INDEX idx_comments_post_id ON comments(post_id);
#CREATE INDEX idx_stories_user_id ON stories(user_id);
#CREATE INDEX idx_stories_expires_at ON stories(expires_at);
#CREATE INDEX idx_follows_follower_id ON follows(follower_id);
#CREATE INDEX idx_follows_following_id ON follows(following_id);